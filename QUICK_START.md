# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: GPU Mining –≤ ALFIS

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. ‚úÖ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥**: GPU –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª nonce=0 –≤–º–µ—Å—Ç–æ —Ç–µ–∫—É—â–µ–≥–æ ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
2. ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: batch_size 8192 ‚Üí 4096 (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—à–µ–π RTX 4080)
3. ‚úÖ **Async operations**: –£–º–µ–Ω—å—à–µ–Ω overhead –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
4. ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –≥–∞–π–¥—ã –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üì• –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

```bash
cd ~/Rust/blakeout-gpu2/blakeout-gpu
git pull
```

## üî® –ö–æ–º–ø–∏–ª—è—Ü–∏—è ALFIS —Å GPU

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏
chmod +x build_with_gpu.sh
./build_with_gpu.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –Ω–∞–ª–∏—á–∏–µ CUDA
2. ‚úÖ –°–æ–±–µ—Ä–µ—Ç blakeout-gpu —Å CUDA
3. ‚úÖ –°–æ–±–µ—Ä–µ—Ç ALFIS —Å GPU –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
4. ‚úÖ –°–æ–∑–¥–∞—Å—Ç run_alfis_gpu.sh –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### –†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞:

```bash
# 1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ nvcc –¥–æ—Å—Ç—É–ø–µ–Ω
nvcc --version

# –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤—å—Ç–µ –≤ PATH:
export PATH=/usr/local/cuda/bin:$PATH
export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH

# 2. –°–æ–±–µ—Ä–∏—Ç–µ blakeout-gpu
cd blakeout-gpu
cargo build --release

# 3. –°–æ–±–µ—Ä–∏—Ç–µ ALFIS
cd ../Alfis-master
cargo build --release --features gpu --no-default-features

# 4. –ù–∞–π–¥–∏—Ç–µ –ø—É—Ç—å –∫ CUDA –±–∏–±–ª–∏–æ—Ç–µ–∫–µ
CUDA_LIB=$(find ../blakeout-gpu/target/release/build -name "libblakeout_cuda.so" | head -1)
export LD_LIBRARY_PATH=$(dirname "$CUDA_LIB"):$LD_LIBRARY_PATH
```

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–±–æ—Ä–∫—É:

```bash
cd Alfis-master
./run_alfis_gpu.sh
```

### –ï—Å–ª–∏ —Å–æ–±–∏—Ä–∞–ª–∏ –≤—Ä—É—á–Ω—É—é:

```bash
# –ù–∞–π–¥–∏—Ç–µ CUDA –±–∏–±–ª–∏–æ—Ç–µ–∫—É
CUDA_LIB=$(find ../blakeout-gpu/target/release/build -name "libblakeout_cuda.so" | head -1)

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ LD_LIBRARY_PATH –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ
export LD_LIBRARY_PATH=$(dirname "$CUDA_LIB"):$LD_LIBRARY_PATH
./target/release/alfis
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ GPU —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤ –ª–æ–≥–∞—Ö:

```
INFO GPU miner initialized successfully with batch size 4096
INFO Thread 0 using GPU for mining
```

–ö–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥:
```
INFO GPU mining speed: 1682 H/s, max difficulty: 15, target: 20
```

## üìä –û–∂–∏–¥–∞–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–í–∞—à–∞ RTX 4080 SUPER:**
- **~1,682 H/s** (–≤–º–µ—Å—Ç–æ 450 H/s –Ω–∞ CPU)
- **3.7x —É—Å–∫–æ—Ä–µ–Ω–∏–µ** –ø—Ä–æ—Ç–∏–≤ 12-–ø–æ—Ç–æ—á–Ω–æ–≥–æ CPU
- **8GB VRAM** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ò–∑–º–µ–Ω–∏—Ç—å batch_size

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `Alfis-master/src/gpu_miner.rs`:

```rust
batch_size: 4096,  // 2048 –¥–ª—è 4GB VRAM, 8192 –¥–ª—è 16GB VRAM
```

–ó–∞—Ç–µ–º –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ:
```bash
cargo build --release --features gpu
```

### –û—Ç–∫–ª—é—á–∏—Ç—å GPU

–°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –±–µ–∑ feature:
```bash
cargo build --release
```

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### GPU –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥—Ä–∞–π–≤–µ—Ä
nvidia-smi

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CUDA
nvcc --version

# –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ CUDA Toolkit
# https://developer.nvidia.com/cuda-downloads
```

### "libblakeout_cuda.so: cannot open shared object file"

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ CUDA –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –†–µ—à–µ–Ω–∏—è:

**–í–∞—Ä–∏–∞–Ω—Ç 1 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `run_alfis_gpu.sh`:
```bash
cd Alfis-master
./run_alfis_gpu.sh
```

**–í–∞—Ä–∏–∞–Ω—Ç 2:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ LD_LIBRARY_PATH –≤—Ä—É—á–Ω—É—é:
```bash
CUDA_LIB=$(find ../blakeout-gpu/target/release/build -name "libblakeout_cuda.so" | head -1)
export LD_LIBRARY_PATH=$(dirname "$CUDA_LIB"):$LD_LIBRARY_PATH
./target/release/alfis
```

**–í–∞—Ä–∏–∞–Ω—Ç 3:** –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–∫—Ä–∏–ø—Ç–æ–º:
```bash
cd ~/Rust/blakeout-gpu2/blakeout-gpu
./build_with_gpu.sh
```

### –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ nvcc –¥–æ—Å—Ç—É–ø–µ–Ω
nvcc --version

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—É—Ç—å –∫ CUDA –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
export CUDA_PATH=/usr/local/cuda
export PATH=/usr/local/cuda/bin:$PATH

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç
./build_with_gpu.sh
```

### GPU slower than expected

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É: `nvidia-smi` (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å <80¬∞C)
- –ó–∞–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–∏–µ GPU –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ batch_size=4096

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –í–æ –≤—Ä–µ–º—è –º–∞–π–Ω–∏–Ω–≥–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤—Ç–æ—Ä–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª:

```bash
watch -n 1 nvidia-smi
```

–°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞:
- **GPU-Util**: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ~95-100%
- **Memory-Usage**: ~8000MB / ~16000MB
- **Temp**: <80¬∞C
- **Power**: –±–ª–∏–∑–∫–æ –∫ –º–∞–∫—Å–∏–º—É–º—É (200-300W)

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **ALFIS_GPU_INTEGRATION.md** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **PERFORMANCE.md** (–≤ blakeout-gpu/) - –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **TEST_INSTRUCTIONS.md** (–≤ blakeout-gpu/) - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ standalone

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ ALFIS —Å GPU
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ "GPU miner initialized"
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –±–ª–æ–∫–∞
4. –°—Ä–∞–≤–Ω–∏—Ç–µ —Å CPU –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** GPU –Ω–∞–π–¥–µ—Ç –±–ª–æ–∫ –≤ **~3.7x –±—ã—Å—Ç—Ä–µ–µ** —á–µ–º CPU!

---

## üí° –ü–æ—á–µ–º—É –Ω–µ –±–æ–ª—å—à–µ —É—Å–∫–æ—Ä–µ–Ω–∏—è?

Blakeout **—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω** –±—ã—Ç—å GPU-resistant:
- 65,536 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π Blake2s
- –ö–∞–∂–¥–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –∂–¥–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â—É—é
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ —Ö–µ—à–∞

GPU –º–æ–∂–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å **—Ä–∞–∑–Ω—ã–µ nonce**, –Ω–æ –Ω–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ **–≤–Ω—É—Ç—Ä–∏ —Ö–µ—à–∞**.

**3.7x - —ç—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è memory-hard –∞–ª–≥–æ—Ä–∏—Ç–º–∞!** üéâ

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: `blakeout-gpu/PERFORMANCE.md`
