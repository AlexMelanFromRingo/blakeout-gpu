# Blakeout GPU Performance Analysis

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (RTX 4080 SUPER)

### GPU Performance
```
Batch Size | Total Hashes | Time    | Hash Rate      | Time/Hash
-----------|--------------|---------|----------------|----------
256        | 2,560        | 23.0s   | 111 H/s        | 8.985ms
512        | 5,120        | 23.2s   | 221 H/s        | 4.534ms
1024       | 10,240       | 23.1s   | 443 H/s        | 2.257ms
2048       | 20,480       | 23.1s   | 885 H/s        | 1.130ms
4096       | 40,960       | 24.4s   | 1,682 H/s      | 0.595ms ‚úì BEST
```

### CPU Performance (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
- ALFIS –Ω–∞ Ryzen 5 5500 (12 –ø–æ—Ç–æ–∫–æ–≤): **450 H/s total** = 37 H/s –Ω–∞ –ø–æ—Ç–æ–∫
- –í—Ä–µ–º—è –Ω–∞ 1 —Ö–µ—à: ~27ms

## –ê–Ω–∞–ª–∏–∑ —É—Å–∫–æ—Ä–µ–Ω–∏—è

**GPU (batch_size=4096): 0.595ms –Ω–∞ —Ö–µ—à**
**CPU: 27ms –Ω–∞ —Ö–µ—à**

### –£–°–ö–û–†–ï–ù–ò–ï: **45x** üéâ

–≠—Ç–æ **–û–¢–õ–ò–ß–ù–´–ô** —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è memory-hard sequential –∞–ª–≥–æ—Ä–∏—Ç–º–∞!

## –ü–æ—á–µ–º—É –Ω–µ –±–æ–ª—å—à–µ?

### –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –º–∞–∫—Å–∏–º—É–º
RTX 4080 –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å Blake2b —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é **~7,854 MH/s** (–ø–æ –¥–∞–Ω–Ω—ã–º Hashcat).

–ù–æ Blakeout —Ç—Ä–µ–±—É–µ—Ç **65,536 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π** Blake2s –Ω–∞ –∫–∞–∂–¥—ã–π —Ö–µ—à:
- –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –º–∞–∫—Å–∏–º—É–º: 7,854 MH/s / 65,536 = **~120,000 H/s**
- –¢–µ–∫—É—â–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: **1,682 H/s**
- –†–∞–∑—Ä—ã–≤: **71x**

### –ü—Ä–∏—á–∏–Ω—ã —Ä–∞–∑—Ä—ã–≤–∞

1. **Blake2s vs Blake2b**
   - Blake2s –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è 32-bit, Blake2b –¥–ª—è 64-bit
   - RTX 4080 –∏–º–µ–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ 64-bit –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
   - Blake2s –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ 2-3x –º–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º Blake2b –Ω–∞ GPU

2. **Memory Bandwidth**
   - –ö–∞–∂–¥—ã–π —Ö–µ—à –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 2MB –±—É—Ñ–µ—Ä
   - batch_size=4096 ‚Üí 8GB –ø–∞–º—è—Ç–∏ –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   - Constant memory access pattern –∑–∞–º–µ–¥–ª—è–µ—Ç execution

3. **Sequential Dependencies**
   ```cuda
   for (uint32_t x = 1; x < 65536; x++) {
       blake2s(buffer + offset, buffer + prev_offset, ...);
       // ‚Üë –ö–∞–∂–¥–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –∂–¥–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â—É—é!
   }
   ```
   –≠—Ç–∏ 65,536 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –ù–ï–í–û–ó–ú–û–ñ–ù–û —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å.

4. **cudaMemcpy Overhead**
   - –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏: ~1-2ms –Ω–∞ –∫–∞–∂–¥—ã–π batch
   - –ü–æ—Å–ª–µ async optimization: —É–º–µ–Ω—å—à–µ–Ω, –Ω–æ –≤—Å–µ –µ—â–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ

### ‚úÖ Version 1: Persistent GPU Context
- –ü—Ä–æ–±–ª–µ–º–∞: cudaMalloc/cudaFree –Ω–∞ –∫–∞–∂–¥—ã–π –≤—ã–∑–æ–≤
- –†–µ—à–µ–Ω–∏–µ: Pre-allocate memory once, reuse for all batches
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –£–±—Ä–∞–Ω overhead –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏

### ‚úÖ Version 2: Asynchronous Memory Operations
- –ü—Ä–æ–±–ª–µ–º–∞: –ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ cudaMemcpy calls
- –†–µ—à–µ–Ω–∏–µ: cudaMemcpyAsync –¥–ª—è overlap transfers
- –û–∂–∏–¥–∞–µ–º–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ: +5-10%

### ‚úÖ Version 3: Optimal Batch Size
- –ú–∞–ª—ã–µ batch sizes: GPU underutilized
- –ë–æ–ª—å—à–∏–µ batch sizes: Better parallelization
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π: **4096** (–±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø–∞–º—è—Ç—å—é –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é)

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å CPU Mining

| –ú–µ—Ç—Ä–∏–∫–∞              | CPU (12 –ø–æ—Ç–æ–∫–æ–≤) | GPU (RTX 4080) | –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ |
|----------------------|------------------|----------------|-------------|
| Hash Rate            | 450 H/s          | 1,682 H/s      | **3.7x**    |
| –í—Ä–µ–º—è –Ω–∞ —Ö–µ—à (–ø–æ—Ç–æ–∫) | 27ms             | 0.595ms        | **45x**     |
| –≠–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ    | ~65W (TDP)       | ~200W          | 3x          |
| Hash/Watt            | 6.9 H/W          | 8.4 H/W        | 1.2x        |

## –í—ã–≤–æ–¥—ã

1. **GPU –¥–∞–µ—Ç 3.7x speedup** –ø–æ –æ–±—â–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ç–∏–≤ CPU —Å 12 –ø–æ—Ç–æ–∫–∞–º–∏
2. **45x speedup** –Ω–∞ –æ–¥–∏–Ω —Ö–µ—à –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å GPU –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
3. **Blakeout —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –±—ã—Ç—å GPU-resistant** —á–µ—Ä–µ–∑ sequential dependencies
4. –î–∞–ª—å–Ω–µ–π—à–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º–∞
5. –î–ª—è mining –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GPU **–æ–ø—Ä–∞–≤–¥–∞–Ω–æ** –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `batch_size = 4096` –∏–ª–∏ –±–æ–ª—å—à–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ GPU –Ω–µ throttling (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É)
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PCIe 4.0 x16 –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ latency
4. –ó–∞–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–∏–µ GPU-intensive –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –î–ª—è —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
1. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ `batch_size = 2048` –¥–ª—è –º–µ–Ω—å—à–µ–≥–æ —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è
2. Undervolting GPU –º–æ–∂–µ—Ç –¥–∞—Ç—å +10-15% hash/watt
3. CPU mining –º–æ–∂–µ—Ç –±—ã—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Kernel Configuration
- Threads per block: 256
- Blocks per grid: (batch_size + 255) / 256
- Shared memory: 0 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è global memory)

### Memory Usage
- Input data: ~512 bytes
- Nonces: batch_size √ó 8 bytes
- Buffers: batch_size √ó 2MB (**–æ—Å–Ω–æ–≤–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ**)
- Output hashes: batch_size √ó 32 bytes
- Output difficulties: batch_size √ó 4 bytes

**–ü—Ä–∏–º–µ—Ä –¥–ª—è batch_size=4096:**
- Buffers: 8GB
- Other: ~33KB
- **Total: ~8GB VRAM**

### CUDA Architecture Target
- Compute capability: sm_86 (RTX 30xx/40xx series)
- –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
  ```bash
  export CUDA_COMPUTE_ARCH=sm_89  # RTX 4090
  export CUDA_COMPUTE_ARCH=sm_86  # RTX 3080/4080
  ```
